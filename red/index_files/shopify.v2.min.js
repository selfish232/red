var SPRCallbacks={};if(SPRCallbacks={onProductLoad:function(e){},onReviewsLoad:function(e){StampedFn.createAllWidgets(!0)},onFormSuccess:function(e){null!=document.getElementById("link-write-questions")&&(document.getElementById("link-write-questions").style.display=null)}},void 0===StampedFn)var StampedFn=function(e,t){"use strict";var a,i,r="",n=!1,s=!1,o=0,p=!1;function d(){var e,t=[],a=!1,i=F("#shopify-product-reviews");i.length&&(e=i.data("id"),F(".spr-review",i).each(function(e,i){var r=F("#stamped-review-image",i);(a=r.length>0)||(r=F("#stamped-review-options",i),(a=r.length>0)&&F(".spr-review-header-title",this).prependTo(F(".spr-review-content",this)));var n=r.data("author"),s=F(this).attr("id").replace("spr-review-",""),o={author:n,timestamp:w(i),reviewId:s};t.push(o)}),1==a&&g(e,t))}function l(){var e=F("#shopify-product-reviews");if(e.length){if(!n){e.append('<style>.spr-reviews[data-type="questions"] .spr-review-content-body { margin-top:15px !important; }</style>')}f(1,e.data("id"))}}function c(){var t,a,i,r,s,o=F("#shopify-product-reviews"),p=F("#stamped-review-share");if(o.length&&p.length){if(!n){F("head").append("<style>.spr-review-reply {clear:both; }.spr-review-reportreview {float:right; display:none;} #stamped-share-wrapper{margin-bottom:15px;font-size:11px;float:left;line-height:16px;} .stamped-thumbs-up,.stamped-thumbs-down { cursor:pointer; } .stamped-share-button { cursor:pointer; }.stamped-share-links a { color:blue; text-decoration:none;}</style>")}o.data("id"),(t=e.location.href)&&(t+=t.indexOf("?")>-1?"%26":"?",t+="ref=stampedio"),F(".spr-reviews:first .spr-review",o).each(function(e,n){var o=F(".spr-review-content",n);if(o.length){if(F("#stamped-share-wrapper",n).length)return;var p=F(".spr-icon-star",n).length;(a=F(n).attr("id"))&&(a=a.replace("spr-review-","")),s=b("★",p),i=F(".spr-review-header-title",n).html(),(r=F(".spr-review-content-body",n).html())&&(r=(r=(r=r.replace("<br>","")).replace("</br>","")).substr(0,100),r=encodeURIComponent(r));var d=F('<div id="stamped-share-wrapper">'),l=F('<a class="stamped-share-button"><i class="fa fa-share-alt"></i> Share</a>'),c=F('<span class="stamped-share-links">'),h='<a href="https://www.facebook.com/dialog/feed?app_id=222664514734026&caption='+s+"&description="+r+"&display=popup&link="+t+"&name="+i+"&redirect_uri=https://stamped.io/shares?review_id="+a+'" target="_blank">Facebook</a>',u='<a href="https://twitter.com/intent/tweet?text='+r+"&url="+t+'" target="_blank">Twitter</a>',m='<a href="https://plus.google.com/share?url='+t+'" target="_blank">Google</a>';c.append(h),c.append(" &nbsp;.&nbsp; "),c.append(u),c.append(" &nbsp;.&nbsp; "),c.append(m),d.append(l),d.append(" &nbsp; | &nbsp;&nbsp;"),d.append(c.hide()),o.after(d),F(d).on("click",".stamped-share-button",function(){F(this).parent().find(".stamped-share-links").fadeToggle()})}})}}function h(e){var t=F("#shopify-product-reviews"+(e?" "+e:""));if(t.length){var a=F(".spr-review #stamped-review-avatar",t);if(a.length){if(!n){F("head").append("<style>#stamped-review-avatar { float: left; position: absolute; height: 60px; width: 60px; background: #eee; } #stamped-review-avatar img { width:100% !important; } .spr-review-header-byline { opacity: 1 !important; } .spr-review-header {display: table; width: 100%; height: 90px; } .spr-review-header .author { margin-right:5px; } .spr-review-header .author, .spr-review-header .spr-starratings .spr-icon:first-child, .spr-review-header-byline > strong { margin-left:70px; } .spr-review-header-byline { width:100%; } .spr-review-header-title {display: table-footer-group !important; } .spr-review-header-byline {display: table-header-group !important; }</style>")}if(r){var i=F('<img src="'+r+'">');a.html(i)}else F.ajax({type:"GET",url:"//stamped.io/api/reviews/avatarImage",crossDomain:!0,data:{shop:Shopify.shop},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(e){r=e;var t=F('<img src="'+e+'">');a.html(t)}}})}}}function u(){var e=F("#shopify-product-reviews");e.length&&F(".spr-review",e).each(function(e,t){F(".spr-review-header-title",this).prependTo(F(".spr-review-content",this))})}function m(){setTimeout(function(){F(".spr-badge-caption").length&&F(".spr-badge-caption").each(function(e){var t=F(this).text(),a=F("<a/>");a.attr("href","#shopify-product-reviews"),a.text(t),F(this).html(a)})},3e3)}function f(e,a){var i=F("#stamped-qna-widget"),r=i.data("take")||5;F("#stamped-main-widget").length&&F.ajax({type:"GET",url:"//stamped.io/api/questions",crossDomain:!0,data:{shop:Shopify.shop,productId:a,page:e,take:r},contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){if(1==a.a){var n,s,o;n=a.results,s=a.t,o=a.form,a.p,function(e){if(!F(".stamped-tabs").length){F(".spr-summary-actions-newreview").attr("id","link-write-review").attr("onclick",'StampedFn.toggleForm("review");return false'),F(".spr-summary-actions").prepend('<a href="#" id="link-write-questions" class="spr-summary-actions-newreview" onclick="StampedFn.toggleForm();return false"></a>');var t=F('[itemprop="votes"]').attr("content")||"0",a=F('<ul class="stamped-tabs">'),i=F('<li id="tab-reviews" role="tab" aria-controls="stamped-reviews-tab" class="active" data-type="reviews">Reviews ('+t+")</li>").on("click",v),r=F('<li id="tab-questions" role="tab" aria-controls="stamped-questions-tab" data-type="questions">Questions ('+e+")</li>").on("click",v);a.append(i).append(r);var n=F('<div class="stamped-tab-container">').append(a);F(".spr-content").prepend(n)}}(s),function(e){if(!F('.spr-reviews[data-type="questions"]').length){F("#shopify-product-reviews").prepend("<style>.spr-reviews[data-type='questions'] #stamped-review-avatar { position:inherit !important; } .spr-reviews[data-type='questions'] .spr-review-header .author { margin-left:15px; } .stamped-tab-container {margin-top: 20px; } ul.stamped-tabs { margin-left:0; margin-bottom:-24px; } ul.stamped-tabs li { display:inline-block; margin-right:15px; margin-bottom:0; padding-bottom: 3px; cursor:pointer; } ul.stamped-tabs li.active { border-bottom:3px solid #000; } .spr-review-content { display:block; } .spr-review-header-dateline {float:right; color:#a2a2a2; font-size:12px;} .spr-icon-comment { color:#a2a2a2; margin-top:10px; } .spr-summary-actions-newreview { display:block; } </style>"),F("#shopify-product-reviews").append('<style>@media screen and (max-width: 590px) { .spr-summary-actions { float:none !important; margin-top:5px; } } .spr-summary-actions { float:right; } .spr-summary-actions-newreview { border: 1px solid; padding: 5px 10px; margin-left: 10px; } .spr-summary-actions-newreview#link-write-review:before { content: "\\f044 "; font-family: FontAwesome; font-style: normal; font-weight: normal; text-decoration: inherit; padding-right: 3px; display: inline-block; } .spr-summary-actions-newreview#link-write-questions:before { content: "\\f0e6 "; font-family: FontAwesome; font-style: normal; font-weight: normal; text-decoration: inherit; padding-right: 3px; display: inline-block; } .spr-summary-actions-newreview#link-write-questions:after { content:"Ask a Question"; display: inline-block; }</style>'),F(".spr-reviews").attr("data-type","reviews"),F(".spr-form").attr("data-type","reviews");var t=F('<div class="spr-reviews">').attr("data-type","questions").hide();F(".spr-content").append(t);var a=F('<div class="spr-form" style="" data-type="questions">').hide().html(e);F(".spr-form").before(a),p&&(v(null,"questions"),x("#shopify-product-reviews"))}}(o);var d=F('.spr-reviews[data-type="questions"]');d.html("");for(var l=0;l<n.length;l++){var c=n[l],u=F('<div class="spr-review" id="'+c.guid+'"></div>'),m=F('<div class="spr-review-header">'),f=F('<div class="spr-review-content">'),g=F('<div class="spr-review-footer">');c.title&&d.append(F('<h3 class="spr-review-content-title" id="'+c.guid+'">').html(""+c.title)),m.append(F('<span class="spr-review-header-byline">').html('<strong class="author">'+c.name+"</strong>").prepend(F('<div id="stamped-review-avatar">')).append(F('<span class="spr-review-header-dateline">').html(n[l].date))),f.append(F('<p class="spr-review-content-body">').html("Q: "+(c.message||c.title)+'<div class="spr-icon-comment"><i class="fa fa-comment"></i> Answers ('+c.answersList.length+")</div>")),u.append(m).append(f);for(var w=0;w<c.answersList.length;w++){var b=c.answersList[w],y=F('<div class="spr-review-reply">');y.append(F('<span class="spr-review-header-byline">').html(b.name).append(F('<span class="spr-review-header-dateline">').html(b.date))),y.append(F('<p class="spr-review-reply-body">').html("A: "+b.message)),u.append(y)}u.append(g),d.append(u)}if(h('.spr-reviews[data-type="questions"]'),function(e,t,a){var i=e>0?e/a<1?1:Math.round(e/a):1;if(1==i)return;var r='<div class="spr-pagination" id="spr-pagination-question"><div><span id="spr-pagination-prev" class="spr-pagination-prev"><a href="#shopify-product-reviews" onclick="StampedFn.pageQuestions(this)" role="button" tabindex="0" data-product-id="" data-page="'+(t-1)+'">&laquo; Previous</a></span><span id="pages"></span><span id="spr-pagination-next" class="spr-pagination-next"><a href="#shopify-product-reviews" onclick="StampedFn.pageQuestions(this)" role="button" tabindex="0" data-product-id="" data-page="'+(t+1)+'">Next &raquo;</a></span></div></div>',n=F('.spr-reviews[data-type="questions"]'),s=F(".spr-pagination",n);s.length?s.replaceWith(r):n.append(r);s=F(".spr-pagination",n);var e=i,t=t,o=[];if(o.push(1),e<=7){for(var p=2;p<e;p++)o.push(p);e==t&&o.push(t)}if(e>=8){var d=t-2;d>=1&&(t-2!=1&&o.push(t-2),o.push(t-1)),1!=t&&o.push(t);var l=t+2;l<=e&&(o.push(t+1),l!=e&&o.push(t+2))}1==t||1==t?F("#spr-pagination-prev",s).hide():F("#spr-pagination-prev",s).show();e==t||1==e?F("#spr-pagination-next",s).hide():F("#spr-pagination-next",s).show();e!=t&&o.push(e);for(var p=0;p<o.length;p++){var c=o[p]==t;c?F("#pages",s).append(' <span class="spr-pagination-page is-active">'+o[p]+"</span> "):F("#pages",s).append(' <span class="spr-pagination-page"><a href="#shopify-product-reviews" onclick="StampedFn.pageQuestions(this)" role="button" tabindex="0" data-product-id="" data-page="'+o[p]+'">'+o[p]+"</a></span> "),1==o[p]&&e>7&&t>=5&&F("#pages",s).append(' <span class="spr-pagination-deco">&hellip;</span>'),p==o.length-2&&t+2<e&&F("#pages",s).append(' <span class="spr-pagination-deco">&hellip;</span>')}}(s,e,r),i.length)d.show(),d.appendTo(i),F('.spr-form[data-type="questions"]').prependTo(i),F('<div style="clear:both;"></div>').prependTo(i),F("#link-write-questions").prependTo(i),F("#shopify-product-reviews").append("<style>.stamped-tab-container { display:none !important; }</style>"),1!=e&&x("#stamped-qna-widget");F(t).trigger("stamped:qna:loaded")}}})}function g(e,a){if(!s){s=!0;var i=F("#shopify-product-reviews");F.ajax({type:"POST",url:"//stamped.io/api/reviews/ImagesAndVotes?shop="+Shopify.shop+"&productId="+e,data:{reviews:a},success:function(e){for(var a=0,r=(e=e.reviews).length;a<r;a++){var n=e[a];if(n.reviewImageUrl){var o=n.reviewImageUrl.split(","),p="",d=F('[itemprop="itemreviewed"]',i);if(d.length&&(p=d.attr("content")),!(x=F(".spr-review").find('#stamped-review-image[data-date="'+n.timestamp+'"][data-author="'+n.author+'"]').closest(".spr-review").find(".spr-review-content")).find("#stamped-review-photos").length){for(var l=F('<div id="stamped-review-photos">'),c=0,h=o.length;c<h;c++){var u="//s3-us-west-2.amazonaws.com/stamped.io/uploads/photos/"+o[c],m=t.createElement("img");m.setAttribute("src",u),m.setAttribute("height","auto"),m.setAttribute("width","20%"),p&&m.setAttribute("alt",p),m.setAttribute("align","left"),m.setAttribute("style","margin-right:10px;");var f=F('<a href="'+u+'" data-featherlight="image"></a>');F(f).append(m),F(l).append(f)}F(x).prepend(l)}}if(n.reviewId){var g=F('.spr-review[id="spr-review-'+n.reviewId+'"]');g.length&&(F("#stamped-rating-wrapper .stamped-thumbs-up .fa",g).html("&nbsp;"+n.voteUp),F("#stamped-rating-wrapper .stamped-thumbs-down .fa",g).html("&nbsp;"+n.voteDown),"1"==n.verifiedType&&(F(".spr-review-header-byline .verified",g).show(),F(".spr-review-header-byline .verified",g).css({display:""})))}if(n.reviewOptionsList){for(var v=F(".spr-review").find('#stamped-review-options[data-date="'+n.timestamp+'"][data-author="'+n.author+'"]'),w=v.attr("data-position"),b='<ul id="stamped-review-options">',y=0;y<n.reviewOptionsList.length;y++)n.reviewOptionsList[y]&&(b+='<li><span class="message"><strong>'+n.reviewOptionsList[y].message+':</strong></span> <span class="value">'+n.reviewOptionsList[y].value+"</span></li>");var x;if(b+="</ul>",!(x=v.closest(".spr-review").find(".spr-review-content")).find("#stamped-review-options").length)if(w&&"top"!=w){if("bottom"==w)F(x).append(F(b));else if("middle"==w){var k=v.closest(".spr-review").find(".spr-review-content").find(".spr-review-header-title");F(x).after(F(k))}}else F(x).prepend(F(b))}s=!1}},error:function(e){s=!1}})}}function v(e,t){F(".stamped-tabs #tab-reviews").removeClass("active"),F(".stamped-tabs #tab-questions").removeClass("active"),"questions"==t&&F(".stamped-tabs #tab-questions").addClass("active"),e&&(F(this).addClass("active"),t=F(this).data("type")),"reviews"==t?(F('.spr-reviews[data-type="reviews"]').show(),F('.spr-reviews[data-type="questions"]').hide()):"questions"==t&&(F('.spr-reviews[data-type="reviews"]').hide(),F('.spr-reviews[data-type="questions"]').show()),F('.spr-form[data-type="reviews"]').hide(),F('.spr-form[data-type="questions"]').hide()}function w(e){var t,a=F("#stamped-review-vote",e),i=F("#stamped-review-image",e),r=F("#stamped-review-options",e);if(i.length&&(t=i.data("date")),a.length&&isNaN(a.data("date"))&&a.attr("data-date")&&(t=a.data("date")),r.length&&isNaN(r.data("date"))&&r.attr("data-date")&&(t=r.data("date")),isNaN(t)&&t){var n=t.replace(" ","T").replace(" ",""),s=n.substring(n.length-2,n.length);n=(n=n.substring(0,n.length-2))+":"+s;var o=new Date(n).toUTCString(),p=Math.round(new Date(o).getTime()/1e3);return a.attr("data-date",p),i.attr("data-date",p),r.attr("data-date",p),p}return t}a=void 0!==e?e:this,i=function(){function e(e){return e instanceof Date?e:isNaN(e)?/^\d+$/.test(e)?new Date(t(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)):new Date(t(e))}function t(e){return parseInt(e)}function a(e,a,i){a=l[a]?a:l[i]?i:"en";for(var r=0,n=e<0?1:0,s=e=Math.abs(e);e>=c[r]&&r<h;r++)e/=c[r];return(e=t(e))>(0===(r*=2)?9:1)&&(r+=1),l[a](e,r,s)[n].replace("%s",e)}function i(t,a){return((a=a?e(a):new Date)-e(t))/1e3}function r(e){return e.dataset.timeago?e.dataset.timeago:n(e,u)}function n(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0}function s(e,t){this.nowDate=e,this.defaultLocale=t||"en"}function o(e,t){return new s(e,t)}var p="second_minute_hour_day_week_month_month".split("_"),d="秒_分钟_小时_天_周_月_年".split("_"),l={en:function(e,t){if(0===t)return["just now","right now"];var a=p[parseInt(t/2)];return e>1&&(a+="s"),[e+" "+a+" ago","in "+e+" "+a]},zh_CN:function(e,t){if(0===t)return["刚刚","片刻后"];var a=d[parseInt(t/2)];return[e+a+"前",e+a+"后"]}},c=[60,60,24,7,365/7/12,1],h=6,u="datetime",m="data-tid",f={};return s.prototype.doRender=function(e,t,r){var n,s=i(t,this.nowDate),o=this;e.innerHTML=a(s,r,this.defaultLocale),f[n=setTimeout(function(){o.doRender(e,t,r),delete f[n]},Math.min(1e3*function(e){for(var t=1,a=0,i=Math.abs(e);e>=c[a]&&a<h;a++)e/=c[a],t*=c[a];return i=(i%=t)?t-i:t,Math.ceil(i)}(s),2147483647))]=0,function(e,t){e.setAttribute?e.setAttribute(m,t):e.attr&&e.attr(m,t)}(e,n)},s.prototype.format=function(e,t){return a(i(e,this.nowDate),t,this.defaultLocale)},s.prototype.render=function(e,t){void 0===e.length&&(e=[e]);for(var a=0,i=e.length;a<i;a++)this.doRender(e[a],r(e[a]),t)},s.prototype.setLocale=function(e){this.defaultLocale=e},o.register=function(e,t){l[e]=t},o.cancel=function(e){var t;if(e)(t=function(e){return n(e,m)}(e))&&(clearTimeout(t),delete f[t]);else{for(t in f)clearTimeout(t);f={}}},o},"object"==typeof module&&module.exports?(module.exports=i(),module.exports.default=module.exports):a.timeago=i();function b(e,t){for(var a=[],i=0;i<t;)a[i++]=e;return a.join("")}function y(e){for(var t in e)null!==e[t]&&""!==e[t]&&void 0!==e[t]||delete e[t];return e}function x(e){var t=jQuery("html, body"),a=jQuery(e);t.animate({scrollTop:a.offset().top-1},500)}function k(a,i,r){var n=F(i),s=n.data("widget-type"),o=n.data("widget-persist-data")||!1,p=n.data("review-id"),d=n.data("review-ids")?n.data("review-ids").toString().split(","):null,l=n.data("product-id"),c=n.data("product-ids")?n.data("product-ids").toString().split(","):null,h=n.data("product-category"),u=n.data("product-brand"),m=n.data("limit-words"),f=n.data("random"),g=n.data("show-avatar"),v=n.data("take"),w=n.data("fill-empty"),b=n.data("min-rating"),x=n.data("with-photos");F.ajax({type:"GET",url:a+"?"+F.param(y({type:s,reviewId:p,reviewIds:d,productId:l,productIds:c,productCategory:h,productBrand:u,limitWords:m,random:f,shop:Shopify.shop,showAvatar:g,isFillEmpty:w,page:r,skip:v,minRating:b,isWithPhotos:x})),dataType:"json",success:function(a,r,p){if(a){var d=a.template;if("instagram-feed"!=s&&"visual-gallery"!=s&&1!=o&&F(n).html(""),"single"==s)n.append(d),StampedWidgetSingleFn,StampedWidgetSingleFn.init(a.data,n,F);else if("full-page"==s){var l=n.attr("data-rich-snippet"),c="/"==location.pathname;if(a.total>0&&"true"==l&&!c){var h={"@context":"http://schema.org","@type":"Product",name:a.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:a.rating,reviewCount:a.total}},u=t.createElement("script");u.type="application/ld+json",u.innerHTML=JSON.stringify(h),t.getElementsByTagName("head")[0].appendChild(u)}n.append(d),StampedWidgetFullPageFn,StampedWidgetFullPageFn.init(a,n,F)}else"full-page-multiple"==s?(n.append(d),StampedWidgetFullPageMultipleFn,StampedWidgetFullPageMultipleFn.init(a,n,F)):"people-highlight"==s?(n.append(d),StampedWidgetPeopleHighlightFn,StampedWidgetPeopleHighlightFn.init(a,n,F)):"drawer"==s?(n.append(d),StampedWidgetDrawerFn,StampedWidgetDrawerFn.init(a,n,F)):"carousel"==s?(n.append(d),StampedCarouselFn,StampedCarouselFn.init(a,n,F)):"carousel-photos"==s?(n.append(d),StampedCarouselPhotosFn,StampedCarouselPhotosFn.init(a.data,n,F)):"carousel-nps"==s?(n.append(d),StampedCarouselNPSFn,StampedCarouselNPSFn.init(a,n,F)):"instagram-feed"==s?(e.stampedInstagramDataArr||i.append(d),StampedInstagramFeedFn,StampedInstagramFeedFn.init(a,n,F)):"site-badge"==s?(n.append(d),StampedSiteBadgeFn,StampedSiteBadgeFn.init(a,n,F)):"top-rated"==s?(n.append(d),StampedTopRatedFn,StampedTopRatedFn.init(a,n,F)):"wall-photos"==s?(n.append(d),StampedWallPhotosFn,StampedWallPhotosFn.init(a,n,F)):"checkout-comments"==s?(n.append(d),StampedCheckoutCommentsFn,StampedCheckoutCommentsFn.init(a,n,F)):"visual-gallery"==s&&(e.stampedVisualGalleryDataArr||i.append(d),StampedVisualGalleryFeedFn,StampedVisualGalleryFeedFn.init(a,n,F))}}})}function C(t,a){if(e.jQuery&&(F=e.jQuery),1!=n||a){if(!n&&t)return T(),void(n=!0);if(0==n){if(F("#shopify-product-reviews .new-review-form").length)return T(),n=!0,void e.SPR.registerCallbacks();o<10&&setTimeout(function(){C(!1,!0),o++},2e3)}}else T()}function T(){var e,a,i,r,s,o;n||(m(),l()),d(),c(),h(),r=F("#shopify-product-reviews"),s=F("#stamped-review-vote"),o=[],r.length&&s.length&&(e=r.data("id"),n||F("head").append('<style>.spr-review-reportreview {float:left;} #stamped-rating-wrapper:before { content:"Was This Review Helpful? " } #stamped-rating-wrapper{font-size:12px;float:right;} .stamped-thumbs-up,.stamped-thumbs-down { cursor:pointer; }</style>'),F(".spr-review",r).each(function(e,t){a=F(this).attr("id").replace("spr-review-",""),i=F(this).attr("author");var r=w(t);if(r){var n=F(".spr-review-footer",t);if(n.length&&!F("#stamped-rating-wrapper",n).length){var s=F('<div id="stamped-rating-wrapper">');s.html("&nbsp;");var p=F('<a class="stamped-thumbs-up" data-rating="1" data-review-id="'+a+'">'),d=F('<i class="fa fa-thumbs-up"></i>');d.html(" 0"),p.append(d);var l=F('<a class="stamped-thumbs-down" data-rating="-1" data-review-id="'+a+'">'),c=F('<i class="fa fa-thumbs-down"></i>');c.html(" 0"),l.append(c),s.append(p),s.append("<span>&nbsp;&nbsp;&nbsp;</span>"),s.append(l),n.append(s)}var h={author:i,timestamp:r,reviewId:a};o.push(h)}}),F(t).on("click",".stamped-thumbs-up, .stamped-thumbs-down",function(t){var a=F(this).data("review-id"),i=F(this).data("rating"),r=F(this);F.ajax({type:"GET",url:"//stamped.io/api/reviews/vote",crossDomain:!0,data:{shop:Shopify.shop,productId:e,shopifyReviewId:a,vote:i},contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(1==e||-1==e){var t=r.find(".fa").html();t=t.replace("&nbsp;","").trim();var a=parseInt(t);r.find(".fa").html("&nbsp; "+(a+e))}}})}),g(e,o)),u()}String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var a=new RegExp("\\{"+t+"\\}","gi");e=e.replace(a,arguments[t])}return e};var S,F,$="https://stamped.io/api/";t.getElementsByTagName("script"),e.location.hostname;function _(){var a,i=e.location;if(F=e.jQuery,/msie/.test(e.navigator.userAgent.toLowerCase())?(F.support.cors=!0,a=i.hash.indexOf("?"),-1!==a?i.hash.substring(a):""):i.search,F("#stamped-reviews-widget").length>0){var r=$+"widget/reviews";F("[id=stamped-reviews-widget]").each(function(e){k(r,F(this))})}1==e.stampedExcludeFontAwesome||(F("head").append('<link rel="stylesheet" type="text/css" href="//cdn1.stamped.io/files/widget.min.css">'),F("head").append('<style>@media all{.featherlight{display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483647;text-align:center;white-space:nowrap;cursor:pointer;background:#333;background:rgba(0,0,0,0)}.featherlight:last-of-type{background:rgba(0,0,0,.8)}.featherlight:before{content:"";display:inline-block;height:100%;vertical-align:middle;margin-right:-.25em}.featherlight .featherlight-content{position:relative;text-align:left;vertical-align:middle;display:inline-block;overflow:auto;padding:25px 25px 0;border-bottom:25px solid transparent;margin-left:5%;margin-right:5%;max-height:95%;background:#fff;cursor:auto;white-space:normal}.featherlight .featherlight-inner{display:block}.featherlight .featherlight-close-icon{position:absolute;z-index:9999;top:0;right:0;line-height:25px;width:25px;cursor:pointer;text-align:center;font-family:Arial,sans-serif;background:#fff;background:rgba(255,255,255,.3);color:#000}.featherlight .featherlight-image{width:100%}.featherlight-iframe .featherlight-content{border-bottom:0;padding:0}.featherlight iframe{border:0}.featherlight *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}} @media only screen and (max-width:1024px){.featherlight .featherlight-content{margin-left:10px;margin-right:10px;max-height:98%;padding:10px 10px 0;border-bottom:10px solid transparent}} @media all{.featherlight .featherlight-content{padding:0;border:none;min-width:inherit}.featherlight .featherlight-image{max-width:100%;border:20px solid #fff; max-width: 100%;max-height: 100%;width: auto;}}@media only screen and (max-width:1024px){.featherlight .featherlight-content{padding:0;border:none}}</style>'),F("head").append("<style>@media all{.featherlight-next,.featherlight-previous{display:block;position:absolute;top:25px;right:25px;bottom:25px;left:80%;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:rgba(0,0,0,0)}.featherlight-previous{left:25px;right:80%}.featherlight-next:hover,.featherlight-previous:hover{background:rgba(255,255,255,.25)}.featherlight-next span,.featherlight-previous span{display:none;position:absolute;top:50%;left:5%;width:82%;text-align:center;font-size:30px;line-height:80px;margin-top:-40px;color:#fff;font-family:arial;font-style:normal;font-weight:400}.featherlight-next span{right:5%;left:auto}.featherlight-next:hover span,.featherlight-previous:hover span{display:inline-block}.featherlight-loading .featherlight-next,.featherlight-loading .featherlight-previous{display:none}}@media only screen and (max-device-width:1024px){.featherlight-next:hover,.featherlight-previous:hover{background:0 0}.featherlight-next span,.featherlight-previous span{display:block}}@media only screen and (max-width:1024px){.featherlight-next,.featherlight-previous{top:10px;right:10px;left:85%}.featherlight-previous{left:10px;right:85%}.featherlight-next span,.featherlight-previous span{margin-top:-30px;font-size:40px}}</style>")),F("head").append('<style>.spr-review-header-byline { width:100%; } #stamped-reviews-widget[data-widget-type="full-page"]:empty:before { content: "Loading..."; text-align: center; width: 100%; display: block; }</style>'),function(a){function i(e,t){if(!(this instanceof i)){var a=new i(e,t);return a.open(),a}this.id=i.id++,this.setup(e,t),this.chainCallbacks(i._callbackChain)}if(void 0!==a){var r=[],n=function(e){return r=a.grep(r,function(t){return t!==e&&t.$instance.closest("body").length>0})},s={allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,name:1,referrerpolicy:1,scrolling:1,sandbox:1,src:1,srcdoc:1,width:1},o={keyup:"onKeyUp",resize:"onResize"},p=function(e){a.each(i.opened().reverse(),function(){return e.isDefaultPrevented()||!1!==this[o[e.type]](e)?void 0:(e.preventDefault(),e.stopPropagation(),!1)})},d=function(t){if(t!==i._globalHandlerInstalled){i._globalHandlerInstalled=t;var r=a.map(o,function(e,t){return t+"."+i.prototype.namespace}).join(" ");a(e)[t?"on":"off"](r,p)}};i.prototype={constructor:i,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:a.noop,beforeContent:a.noop,beforeClose:a.noop,afterOpen:a.noop,afterContent:a.noop,afterClose:a.noop,onKeyUp:a.noop,onResize:a.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(e,t){"object"!=typeof e||e instanceof a!=0||t||(t=e,e=void 0);var i=a.extend(this,t,{target:e}),r=i.resetCss?i.namespace+"-reset":i.namespace,n=a(i.background||['<div class="'+r+"-loading "+r+'">','<div class="'+r+'-content">','<button class="'+r+"-close-icon "+i.namespace+'-close" aria-label="Close">',i.closeIcon,"</button>",'<div class="'+i.namespace+'-inner">'+i.loading+"</div>","</div>","</div>"].join("")),s="."+i.namespace+"-close"+(i.otherClose?","+i.otherClose:"");return i.$instance=n.clone().addClass(i.variant),i.$instance.on(i.closeTrigger+"."+i.namespace,function(e){var t=a(e.target);("background"===i.closeOnClick&&t.is("."+i.namespace)||"anywhere"===i.closeOnClick||t.closest(s).length)&&(i.close(e),e.preventDefault())}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;var t=this,i=this.constructor.contentFilters,r=function(e){return t.$currentTarget&&t.$currentTarget.attr(e)},n=r(t.targetAttr),s=t.target||n||"",o=i[t.type];if(!o&&s in i&&(o=i[s],s=t.target&&n),s=s||r("href")||"",!o)for(var p in i)t[p]&&(o=i[p],s=t[p]);if(!o){var d=s;if(s=null,a.each(t.contentFilters,function(){return(o=i[this]).test&&(s=o.test(d)),!s&&o.regex&&d.match&&d.match(o.regex)&&(s=d),!s}),!s)return"console"in e&&e.console.error("Featherlight: no content filter found "+(d?' for "'+d+'"':" (no target specified)")),!1}return o.process.call(t,s)},setContent:function(e){var t=this;return e.is("iframe")&&t.$instance.addClass(t.namespace+"-iframe"),t.$instance.removeClass(t.namespace+"-loading"),t.$instance.find("."+t.namespace+"-inner").not(e).slice(1).remove().end().replaceWith(a.contains(t.$instance[0],e[0])?"":e),t.$content=e.addClass(t.namespace+"-inner"),t},open:function(e){var t=this;if(t.$instance.hide().appendTo(t.root),!(e&&e.isDefaultPrevented()||!1===t.beforeOpen(e))){e&&e.preventDefault();var i=t.getContent();if(i)return r.push(t),d(!0),t.$instance.fadeIn(t.openSpeed),t.beforeContent(e),a.when(i).always(function(a){t.setContent(a),t.afterContent(e)}).then(t.$instance.promise()).done(function(){t.afterOpen(e)})}return t.$instance.detach(),a.Deferred().reject().promise()},close:function(e){var t=this,i=a.Deferred();return!1===t.beforeClose(e)?i.reject():(0===n(t).length&&d(!1),t.$instance.fadeOut(t.closeSpeed,function(){t.$instance.detach(),t.afterClose(e),i.resolve()})),i.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var a=Math.max(e/(parseInt(this.$content.parent().css("width"),10)-1),t/(parseInt(this.$content.parent().css("height"),10)-1));a>1&&(a=t/Math.floor(t/a),this.$content.css("width",e/a+"px").css("height",t/a+"px"))}},chainCallbacks:function(e){for(var t in e)this[t]=a.proxy(e[t],this,a.proxy(this[t],this))}},a.extend(i,{id:0,autoBind:"[data-featherlight]",defaults:i.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(e){return e instanceof a&&e},process:function(e){return!1!==this.persist?a(e):a(e).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(e){var t=a.Deferred(),i=new Image,r=a('<img src="'+e+'" alt="" class="'+this.namespace+'-image" />');return i.onload=function(){r.naturalWidth=i.width,r.naturalHeight=i.height,t.resolve(r)},i.onerror=function(){t.reject(r)},i.src=e,t.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(e){return a(e)}},ajax:{regex:/./,process:function(e){var t=a.Deferred(),i=a("<div></div>").load(e,function(e,a){"error"!==a&&t.resolve(i.contents()),t.fail()});return t.promise()}},iframe:{process:function(e){var t=new a.Deferred,i=a("<iframe/>"),r=function(e,t){var a={},i=new RegExp("^"+t+"([A-Z])(.*)");for(var r in e){var n=r.match(i);n&&(a[(n[1]+n[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[r])}return a}(this,"iframe"),n=function(e,t){var a={};for(var i in e)i in t&&(a[i]=e[i],delete e[i]);return a}(r,s);return i.hide().attr("src",e).attr(n).css(r).on("load",function(){t.resolve(i.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),t.promise()}},text:{process:function(e){return a("<div>",{text:e})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(e,t){var i=this,r=new RegExp("^data-"+t+"-(.*)"),n={};return e&&e.attributes&&a.each(e.attributes,function(){var e=this.name.match(r);if(e){var t=this.value,s=a.camelCase(e[1]);if(a.inArray(s,i.functionAttributes)>=0)t=new Function(t);else try{t=JSON.parse(t)}catch(e){}n[s]=t}}),n},extend:function(e,t){var i=function(){this.constructor=e};return i.prototype=this.prototype,e.prototype=new i,e.__super__=this.prototype,a.extend(e,this,t),e.defaults=e.prototype,e},attach:function(e,t,i){var r=this;"object"!=typeof t||t instanceof a!=0||i||(i=t,t=void 0);var n,s=(i=a.extend({},i)).namespace||r.defaults.namespace,o=a.extend({},r.defaults,r.readElementConfig(e[0],s),i),p=function(s){var p=a(s.currentTarget),d=a.extend({$source:e,$currentTarget:p},r.readElementConfig(e[0],o.namespace),r.readElementConfig(s.currentTarget,o.namespace),i),l=n||p.data("featherlight-persisted")||new r(t,d);"shared"===l.persist?n=l:!1!==l.persist&&p.data("featherlight-persisted",l),d.$currentTarget.blur&&d.$currentTarget.blur(),l.open(s)};return e.on(o.openTrigger+"."+o.namespace,o.filter,p),p},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var e=this;return n(),a.grep(r,function(t){return t instanceof e})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var e=this;e.autoBind&&(a(e.autoBind).each(function(){e.attach(a(this))}),a(t).on("click",e.autoBind,function(t){t.isDefaultPrevented()||e.attach(a(t.currentTarget))(t)}))},_callbackChain:{onKeyUp:function(e,t){return 27===t.keyCode?(this.closeOnEsc&&a.featherlight.close(t),!1):e(t)},beforeOpen:function(e,i){return this._previouslyActive=t.activeElement,this._$previouslyTabbable=a("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=a("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(e,t){return a(t).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),t.activeElement.blur&&t.activeElement.blur(),e(i)},afterClose:function(e,t){var i=e(t),r=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(e,t){a(t).attr("tabindex",r._previousWithTabIndices[e])}),this._previouslyActive.focus(),i},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var a=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),a}}}),a.featherlight=i,a.fn.featherlight=function(e,t){return i.attach(this,e,t),this},a(t).ready(function(){i._onReady()})}else"console"in e&&e.console.info("Too much lightness, Featherlight needs jQuery.")}(jQuery),function(a){function i(e,t){if(!(this instanceof i)){var r=new i(a.extend({$source:e,$currentTarget:e.first()},t));return r.open(),r}a.featherlight.apply(this,arguments),this.chainCallbacks(d)}var r=function(t){e.console&&e.console.warn&&e.console.warn("FeatherlightGallery: "+t)};if(void 0===a)return r("Too much lightness, Featherlight needs jQuery.");if(!a.featherlight)return r("Load the featherlight plugin before the gallery plugin");var n="ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch,s=a.event&&a.event.special.swipeleft&&a,o=e.Hammer&&function(t){var a=new e.Hammer.Manager(t[0]);return a.add(new e.Hammer.Swipe),a},p=n&&(s||o);n&&!p&&r("No compatible swipe library detected; one must be included before featherlightGallery for swipe motions to navigate the galleries.");var d={afterClose:function(e,t){var a=this;return a.$instance.off("next."+a.namespace+" previous."+a.namespace),a._swiper&&(a._swiper.off("swipeleft",a._swipeleft).off("swiperight",a._swiperight),a._swiper=null),e(t)},beforeOpen:function(e,t){var a=this;return a.$instance.on("next."+a.namespace+" previous."+a.namespace,function(e){var t="next"===e.type?1:-1;a.navigateTo(a.currentNavigation()+t)}),p&&(a._swiper=p(a.$instance).on("swipeleft",a._swipeleft=function(){a.$instance.trigger("next")}).on("swiperight",a._swiperight=function(){a.$instance.trigger("previous")}),a.$instance.addClass(this.namespace+"-swipe-aware",p)),a.$instance.find("."+a.namespace+"-content").append(a.createNavigation("previous")).append(a.createNavigation("next")),e(t)},beforeContent:function(e,t){var a=this.currentNavigation(),i=this.slides().length;return this.$instance.toggleClass(this.namespace+"-first-slide",0===a).toggleClass(this.namespace+"-last-slide",a===i-1),e(t)},onKeyUp:function(e,t){var a={37:"previous",39:"next"}[t.keyCode];return a?(this.$instance.trigger(a),!1):e(t)}};a.featherlight.extend(i,{autoBind:"[data-featherlight-gallery]"}),a.extend(i.prototype,{previousIcon:"&#9664;",nextIcon:"&#9654;",galleryFadeIn:100,galleryFadeOut:300,slides:function(){return this.filter?this.$source.find(this.filter):this.$source},images:function(){return r("images is deprecated, please use slides instead"),this.slides()},currentNavigation:function(){return this.slides().index(this.$currentTarget)},navigateTo:function(e){var t=this,i=t.slides(),r=i.length,n=t.$instance.find("."+t.namespace+"-inner");return e=(e%r+r)%r,t.$currentTarget=i.eq(e),t.beforeContent(),a.when(t.getContent(),n.fadeTo(t.galleryFadeOut,.2)).always(function(e){t.setContent(e),t.afterContent(),e.fadeTo(t.galleryFadeIn,1)})},createNavigation:function(e){var t=this;return a('<span title="'+e+'" class="'+this.namespace+"-"+e+'"><span>'+this[e+"Icon"]+"</span ></span > ").click(function(){a(this).trigger(e+"."+t.namespace)})}}),a.featherlightGallery=i,a.fn.featherlightGallery=function(e){return i.attach(this,e),this},a(t).ready(function(){i._onReady()})}(jQuery);F.featherlight.defaults.afterOpen=function(e){var t=F(this.$source[0]),a=F(this.$instance[0]);if("#stamped-modal-new"==this.$currentTarget.attr("data-featherlight")){var i=t.closest(".stamped-review-card"),r=F("#stamped-modal-new",a),n=F(".stamped-modal-photo",r),s=F(".stamped-modal-photo > .stamped-modal-photo-bg",r),o=F(".stamped-modal-review-date",r),p=F(".stamped-modal-review-rating",r),d=F(".stamped-modal-review-title",r),l=F(".stamped-modal-review-body",r),c=F(".stamped-modal-review-author",r),h=F(".stamped-modal-review-product a",r),u=F(".stamped-modal-review-share",r),m=F(".stamped-modal-review-vote",r);o.html(F(".stamped-reviews-date",i).html()),p.html(F(".stamped-reviews-rating",i).html()),d.html(F(".stamped-reviews-title",i).html()),l.html(F(".stamped-reviews-message",i).html()),c.html(F(".stamped-reviews-author",i).html()),h.attr("href",F(".stamped-reviews-product",i).attr("href")).html(F(".stamped-reviews-product",i).html()),m.html(F(".stamped-reviews-vote",i).html());var f=[];F(".stamped-reviews-message-image-block a",i).each(function(){f.push(F(this).attr("href"))});var g=t.attr("href"),v=f.indexOf(g),w=f[v];s.css("background-image","url("+w+")"),f.length>1&&(F(".stamped-modal-photo-arrow-right, .stamped-modal-photo-arrow-left",n).show(),F(".stamped-modal-photo-arrow-right, .stamped-modal-photo-arrow-left",n).on("click",function(){"left"==F(this).attr("data-dir")?v--:v++,(v<=0||v>f.length-1)&&(v=0);var e=f[v];s.css("background-image","url("+e+")")}));var y=F(".stamped-reviews-rating .fa-star",i).length,x=l.html(),k=F(".stamped-reviews-product",i).attr("href"),C=F(".stamped-reviews-title",i).text();if(k){var T="https://www.facebook.com/dialog/feed?app_id=222664514734026&caption="+b("★",y)+"&description="+encodeURIComponent(x)+"&display=popup&link="+encodeURIComponent(k)+"&name="+encodeURIComponent(C)+"&redirect_uri=https://stamped.io/shares?productId=",S="https://twitter.com/intent/tweet?text="+x.substr(0,140)+"&url="+encodeURIComponent(k),$="https://plus.google.com/share?url="+encodeURIComponent(k);F("<a>").text("Facebook").attr("href",T).attr("target","_blank").appendTo(u),F("<a>").text("Twitter").attr("href",S).attr("target","_blank").appendTo(u),F("<a>").text("Google").attr("href",$).attr("target","_blank").appendTo(u)}}},C(!1)}return function(t){if(e.location.hash)return 1==e.location.hash.indexOf(t)||-1!=e.location.hash.indexOf(t)}("answers")&&(p=!0),e.jQuery?setTimeout(function(){_()},2e3):((S=t.createElement("script")).type="text/javascript",S.charset="UTF-8",S.src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",t.body.appendChild(S),S.onload=S.onreadystatechange=_),{createBadgesLink:m,createWidgetReviewsImages:d,createWidgetReviewsShare:c,createWidgetQuestionsAndAnswers:l,createWidgetReviewsAvatar:h,createWidgetReviewOptions:u,toggleForm:function(e){"review"==e?(F('.spr-form[data-type="questions"]').hide(),F('.spr-form[data-type="reviews"]').toggle()):(F('.spr-form[data-type="questions"] .spr-form-message-success').hide(),F("#new-question-form").show(),F('.spr-form[data-type="reviews"]').hide(),F('.spr-form[data-type="questions"]').toggle())},submitQuestionForm:function(){var e=F("#new-question-form"),t=F("#stamped-main-widget");if(e.length&&t.length){var a=t.data("name"),i=t.data("description"),r=t.data("url"),n=t.data("image-url"),s=e.serializeArray();s.push({name:"productName",value:a}),s.push({name:"productDescription",value:i}),s.push({name:"productUrl",value:r}),s.push({name:"productImageUrl",value:n}),F.ajax({type:"POST",url:"//stamped.io/api/questions",data:F.param(s),crossDomain:!0,success:function(e){e.a&&(F("#new-question-form").hide(),F('.spr-form[data-type="questions"] .spr-form-message-success').show(),F("#new-question-form")[0].reset())}})}},createAllWidgets:C,pageQuestions:function(e){var t=F("#shopify-product-reviews").data("id");f(F(e).data("page"),t)},pageWidget:function(e){F("#shopify-product-reviews").data("id");var t=F(e).data("page"),a=$+"widget/reviews",i=F(e).closest("#stamped-reviews-widget");i.attr("data-page",t),k(a,i,t)},openUGCModal:function(e,a,i,r,n,s){var o,p;1!=r&&r||(e=function(e,t){for(var a=[],i=0;i<e.length;i++){var r=e[i];if(1!=t||r.reviewUserPhotos){var n={photos:[],name:r.author,via:"Photos",title:r.reviewTitle,body:r.reviewMessage,date:r.reviewDate,dateFull:r.dateCreated,verifiedType:r.reviewVerifiedType,rating:r.reviewRating,products:[{url:r.productUrl,title:r.productName,imageUrl:r.productImageUrl}]};if(r.reviewUserPhotos)for(var s=r.reviewUserPhotos.split(","),o=0;o<s.length;o++)n.photos.push({imageUrl:"//s3-us-west-2.amazonaws.com/stamped.io/uploads/photos/"+s[o],imageThumbnailUrl:"//s3-us-west-2.amazonaws.com/stamped.io/uploads/photos/thumb/"+s[o]});else n.photos.push({imageUrl:r.productImageLargeUrl,imageThumbnailUrl:r.productImageUrl});a.push(n)}}return a}(e,n)),F(i).attr("data-hover-text"),F(i).attr("data-shop-button-text");var d,l=F(i).attr("data-url-param")||"";F(i).attr("data-cropped"),F(i).attr("data-page"),F(i).attr("data-take"),F("#stamped-ugc-modal").length||(o=F('<div class="stamped-ugc-modal"> <div class="stamped-ugc-modal-wrapper"> <a title="Close" class="stamped-modal-close">X</a> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-previous" data-direction="left"><i class="fa fa-angle-left"></i></div> <div class="stamped-ugc-modal-image-wrapper"> <div class="stamped-ugc-modal-image"> </div> <ul> </ul> </div> <div class="stamped-ugc-modal-content"> <div class="stamped-ugc-modal-content-wrapper"> <div class="stamped-ugc-modal-user"> <div class="stamped-ugc-modal-user-username"></div><div class="stamped-ugc-modal-user-source"></div> </div> <div class="stamped-ugc-modal-tags"> <a {0}> <img {1} class="stamped-ugc-modal-tags-product-image"> <div class="stamped-ugc-modal-tags-product-title">{2}</div> <div class="stamped-ugc-modal-tags-button"></div> </a> </div><div class="stamped-ugc-modal-caption"></div>  </div> </div> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-next" data-direction="right"><i class="fa fa-angle-right"></i></div> <div class="stamped-ugc-modal-list-photos"> <ul></ul> </div> </div>'),F(o).appendTo(t.body));var c="",h=e.length;p||(p=F(".stamped-ugc-modal-tags:first",o).html());for(var u=e?e.length:0,m=0;m<h;m++){var f=e[m].imageUrl;f&&(c+=templateBlock.format(u,f),u++)}if(F(".stamped-ugc-media-block-template",i).append(c),F(i).keydown(function(e){if(37==e.keyCode)x("left");else{if(39!=e.keyCode)return;x("right")}}),!d){F(t).on("click",".stamped-modal-close, .stamped-ugc-modal.open",function(e){e.target==this&&(o.remove(),F("body").removeClass("stamped-modal-open"))}),o.on("click",".stamped-ugc-modal-nav-previous, .stamped-ugc-modal-nav-next",function(e){var t=F(this).attr("data-direction");x(t)}),t.addEventListener("touchstart",function(e){g=e.touches[0].clientX,v=e.touches[0].clientY},!1),t.addEventListener("touchmove",function(e){if(g&&v){var t=e.touches[0].clientX,a=e.touches[0].clientY,i=g-t,r=v-a;Math.abs(i)>Math.abs(r)&&x(i>0?"right":"left"),g=null,v=null}},!1);var g=null,v=null}d=!0;var w=function(){var e=Number(F(this).text())+1,t=F(this).data("image-url");F(".stamped-ugc-modal-image-wrapper ul li").removeClass("active"),F(".stamped-ugc-modal-image-wrapper ul li:nth-child("+e+")").addClass("active"),F(".stamped-ugc-modal-image",o).css("background-image",'url("'+t+'")')},b=function(){var e=F(this).data("index-review"),t=F(this).data("index-photo");F(".stamped-ugc-modal-list-photos ul li").removeClass("active"),F(".stamped-ugc-modal-list-photos ul li[data-index-review="+e+"][data-index-photo="+t+"]").addClass("active"),y(e,t)},y=function(a,i){var r=e[a];if(null!=r&&null!=r.photos){if(null!=i?(s=i,i>r.photos.length-1&&(s=0)):s?s>r.photos.length-1&&(s=0):s=0,!F(".stamped-ugc-modal-list-photos ul li",o).length)for(var n=0;n<e.length;n++)for(var d=0;d<e[n].photos.length;d++){var c=a==n?"active":"",h=(e[n].photos[d].imageUrl,e[n].photos[d].imageThumbnailUrl);(f=t.createElement("li")).className=c,f.innerHTML="",(g=t.createAttribute("data-index-review")).value=n,f.setAttributeNode(g),(g=t.createAttribute("data-index-photo")).value=d,f.setAttributeNode(g),f.style.background="url("+h+")",F(".stamped-ugc-modal-list-photos ul",o).append(f),f.onclick=b}if(null!=r.photos[s]){var u=r.photos[s].imageUrl;F(".stamped-ugc-modal-image",o).fadeOut("",function(){F(".stamped-ugc-modal-image",o).css("background-image",'url("'+u+'")'),F(this).fadeIn()})}F(".stamped-ugc-modal-image-wrapper ul",o).html("");for(var m=0;m<r.photos.length;m++){var f,g;c=m==s?"active":"",(f=t.createElement("li")).className=c,f.innerHTML=m,(g=t.createAttribute("data-image-url")).value=r.photos[m].imageUrl,f.setAttributeNode(g),F(".stamped-ugc-modal-image-wrapper ul",o).append(f),f.onclick=w}var v;F(".stamped-ugc-modal-user-source").text("via "+r.via),v=r.dateFull?new Date(r.dateFull):new Date(r.date),F(".stamped-ugc-modal-user-username",o).text(r.name),F(".stamped-ugc-modal-user-username",o).attr("data-verified-type",r.verifiedType);var y="";if(r.rating){for(var x=0;x<r.rating;x++)y+='<i class="fa fa-star"></i>';for(x=0;x<5-r.rating;x++)y+='<i class="fa fa-star-o"></i>'}F(".stamped-ugc-modal-caption",o).html('<div class="stamped-ugc-modal-date">'+(new timeago).format(v)+'</div><div class="stamped-ugc-modal-caption-rating">'+y+'</div><div class="stamped-ugc-modal-caption-title">'+r.title+"</div> "+r.body),F(".stamped-ugc-modal-tags",o).html("");for(var k=0;k<r.products.length;k++){var C=r.products[k];l&&(C.url=C.url+"?param="+l),C.imageUrl?F(".stamped-ugc-modal-tags",o).append(p.format('href="'+C.url+'"','src="'+C.imageUrl+'"',C.title)):F(".stamped-ugc-modal-tags",o).append(p.format('href="'+C.url+'"',"",C.title))}o.hasClass("open")||(o.addClass("open"),F("body").addClass("stamped-modal-open")),o.attr("data-review-index",a),o.attr("data-photo-index",s)}},x=function(e){if(o.hasClass("open"))if(o.attr("data-review-index"),o.attr("data-photo-index"),"left"==e)F(".stamped-ugc-modal-list-photos ul li.active").prev().click();else{if("right"!=e)return;F(".stamped-ugc-modal-list-photos ul li.active").next().click()}};y(a)},loadBadges:function(){}}}(window,document);if(void 0!==Shopify.Checkout&&"thank_you"==Shopify.Checkout.page){var d=new Date,n=d.getTime(),aContainer=document.createElement("div");aContainer.setAttribute("id","second"),aContainer.innerHTML="<img src='http://stamped.io/conversion_tracking.gif?shopShopifyDomain="+Shopify.shop+"&orderId="+Shopify.checkout.order_id+"&orderAmount="+Shopify.checkout.total_price+"&orderCurrency="+Shopify.checkout.currency+"&ts="+n+"'/>",document.body.appendChild(aContainer)}